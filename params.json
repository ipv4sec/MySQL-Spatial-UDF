{"name":"Mysql-spatial-udf","tagline":"MySQL Spatial User Defined Functions","body":"[![Build Status](https://drone.io/github.com/krandalf75/MySQL-Spatial-UDF/status.png)](https://drone.io/github.com/krandalf75/MySQL-Spatial-UDF/latest)\r\n[download](https://drone.io/github.com/krandalf75/MySQL-Spatial-UDF/files)\r\n\r\n# MySQL Spatial User Defined Functions\r\n\r\nThis project add missing spatial functionality to MySQL through an UDF library. \r\nAt this time this library implements more than 20 functions not present on current MySQL database.\r\n\r\n\r\n## What is an User Defined Function?\r\n\r\nAn User Defined Function (UDF) is a C/C++ library that extends the functionality \r\nof a MySQL server by adding new functions that behaves just like a native (built-in) \r\nMySQL functions like abs() or concat().\r\n\r\n\r\n## Build requirements\r\n\r\nThe code is written in C and requires the following libraries:\r\n\r\n- [PROJ.4](http://trac.osgeo.org/proj)\r\n- [GEOS](http://trac.osgeo.org/geos)\r\n\r\n\r\n## Building\r\n\r\n### on UNIX\r\n\r\nOn Linux or similars systems you will need to invoke the command \"cmake .\" This command will resolve \r\ndependences and generate an Makefile. After this a simple call to \"make\" will do the job. \r\n\r\n### on WINDOWS\r\n\r\nIf you have an MSVC 2010 compiler you can use included MySpatialUDF.sln project.  \r\nBefore, you must correct the paths to search library dependences. \r\n\r\nIf you have another version of Visual Studio you will need to install cmake windows environment.\r\ncmake will build a Visual Studio Project with the version you needed and with all the library dependences solved.\r\n\r\nIf you want use Cygwin you will also need cmake. In this case cmake will build a Makefile file that you can use with\r\nthie command make. \r\n\r\n## Installation\r\n\r\n### on UNIX or Cygwin\r\n\r\nIf cmake detects the plugin MySQL's directory  the command \"make -install\" will copy the library to the correct folder.\r\nIf not you can copy the library to this folder manually. Ensure that MySQL can execute this file and his library dependences.\r\n\r\nExecute script MySpatialUDF.sql as a mysql administrator.\r\n\r\n\tWARNING !!\r\n\tThis script drop and creates several tables and procedures in mysql schema.\r\n\tEnsure that you don't delete any table or procedure that is useful !!!!\r\n\r\n### on WINDOWS\r\n\r\nCopy Release/MySpatialUDF.dll and dependent libraries to <MySql Home>\\lib\\plugin\r\n\r\nExecute script MySpatialUDF.sql as a mysql administrator.\r\n\r\n \r\n\tWARNING !!\r\n\tThis script drop and creates several tables and procedures in mysql schema.\r\n\tEnsure that you don't delete any table or procedure that is useful !!!!\r\n\r\n\r\nIf you don't like write in mysql schema you can change the first line of the script.\r\n\r\n\r\n## Current Function List Support\r\n\r\n    +-------------------------------+--------+-------+\r\n    | Function                      | native | msudf |\r\n    +-------------------------------+--------+-------+\r\n    | ST_Area                       | Y      | N     |\r\n    | ST_AsBinary                   | Y      | N     |\r\n    | ST_AsText                     | Y      | N     |\r\n    | ST_Boundary                   | N      | Y     |\r\n    | ST_Buffer                     | N      | Y     |\r\n    | ST_Centroid                   | N      | Y     |\r\n    | ST_Contains                   | N      | Y     |\r\n    | ST_ConvexHull                 | N      | Y     |\r\n    | ST_Crosses                    | N      | Y     |\r\n    | ST_Difference                 | N      | Y     |\r\n    | ST_Dimension                  | Y      | N     |\r\n    | ST_Disjoint                   | N      | Y     |\r\n    | ST_EndPoint                   | Y      | N     |\r\n    | ST_Envelope                   | Y      | N     |\r\n    | ST_ExteriorRing               | Y      | N     |\r\n    | ST_GeomFromText               | Y      | N     |\r\n    | ST_GeomFromWKB                | Y      | N     |\r\n    | ST_GeometryN                  | Y      | N     |\r\n    | ST_GeometryType               | Y      | N     |\r\n    | ST_InteriorRingN              | Y      | N     |\r\n    | ST_Intersection               | N      | Y     |\r\n    | ST_Intersects                 | N      | Y     |\r\n    | ST_IsClosed                   | Y      | N     |\r\n    | ST_IsEmpty                    | N      | Y     |\r\n    | ST_IsRing                     | N      | Y     |\r\n    | ST_IsSimple                   | N      | Y     |\r\n    | ST_IsValid                    | N      | Y     |\r\n    | ST_Length                     | Y      | N     |\r\n    | ST_Length2D                   | Y      | N     |\r\n    | ST_LineMerge                  | N      | Y     |\r\n    | ST_Line_Substring             | N      | Y     |\r\n    | ST_NumGeometries              | Y      | N     |\r\n    | ST_NumInteriorRings           | Y      | N     |\r\n    | ST_NumPoints                  | Y      | N     |\r\n    | ST_Overlaps                   | N      | Y     |\r\n    | ST_PointN                     | Y      | N     |\r\n    | ST_PointOnSurface             | N      | Y     |\r\n    | ST_Reverse                    | N      | Y     |\r\n    | ST_SRID                       | Y      | N     |\r\n    | ST_Simplify                   | N      | Y     |\r\n    | ST_SimplifyPreserveTopology   | N      | Y     |\r\n    | ST_SymDifference              | N      | Y     |\r\n    | ST_Touches                    | N      | Y     |\r\n    | ST_Transform                  | N      | Y     |\r\n    | ST_Union                      | N      | Y     |\r\n    | ST_Within                     | N      | Y     |\r\n    | ST_X                          | Y      | N     |\r\n    | ST_Y                          | Y      | N     |\r\n    +-------------------------------+--------+-------+\r\n\r\nNote: Native functions don't have 'ST_' prefix.\r\n\r\n\r\n## Sample Usage\r\n\r\nYou can load a table with GDAL tool ogr2ogr.\r\n\r\nAfter this check the SRID of the geometry is correct.\r\n\r\n\tmysql> select srid(geom) into @srid from geom_table limit 1;\r\n\tQuery OK, 1 row affected (0.00 sec)\r\n\r\n\tmysql> select @srid;\r\n\t+-------+\r\n\t| @srid |\r\n\t+-------+\r\n\t|  3395 |\r\n\t+-------+\r\n\t1 row in set (0.00 sec)\r\n\r\n\tmysql> select @srid;\r\n\t+-------+\r\n\t| @srid |\r\n\t+-------+\r\n\t|  3395 |\r\n\t+-------+\r\n\t1 row in set (0.00 sec)\r\n\r\n\tmysql> select auth_name,auth_srid,ref_sys_name from mysql.spatial_ref_sys where\r\n\tsrid = @srid;\r\n\t+-----------+-----------+-------------------------+\r\n\t| auth_name | auth_srid | ref_sys_name            |\r\n\t+-----------+-----------+-------------------------+\r\n\t| epsg      |      3395 | WGS 84 / World Mercator |\r\n\t+-----------+-----------+-------------------------+\r\n\t1 row in set (0.00 sec)\r\n\r\n\r\nIf it's wrong you can change the SRID value (without transform) with this update:\r\n\r\n\tmysql> update geom_table set geom = GeomFromWKB(aswkb(geom),3395); \r\n\r\n\r\nYou can create another geometry with different projection with this sentence:\r\n\r\n\tmysql> alter table geom_table add column (geom2 geometry);\r\n\tQuery OK, 1 row affected (0.13 sec)\r\n\tRecords: 1  Duplicates: 0  Warnings: 0 \r\n\r\n\tmysql> update test set geom2 = mysql.transform(geom,4326);\r\n\tQuery OK, 1 row affected (0.00 sec)\r\n\tRows matched: 1000  Changed: 1000  Warnings: 0\r\n\r\n\r\n\r\n## Copyright\r\n\r\nCopyright (c) 2012, Albert Rovira. \r\n\r\nThis program is free software: you can redistribute it and/or modify\r\nit under the terms of the GNU General Public License as published by\r\nthe Free Software Foundation, either version 3 of the License, or\r\n(at your option) any later version.\r\n\r\nThis program is distributed in the hope that it will be useful,\r\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\r\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\nGNU General Public License for more details.\r\n\r\nYou should have received a copy of the GNU General Public License along \r\nwith this program (COPYING.txt).  If not, see <http://www.gnu.org/licenses/>.\r\n","google":"UA-44157344-1","note":"Don't delete this file! It's used internally to help with page regeneration."}